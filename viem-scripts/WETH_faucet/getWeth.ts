const abi = [{"inputs":[{"internalType":"string","name":"mockName","type":"string"},{"internalType":"string","name":"mockSymbol","type":"string"},{"internalType":"address","name":"owner","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"src","type":"address"},{"indexed":true,"internalType":"address","name":"guy","type":"address"},{"indexed":false,"internalType":"uint256","name":"wad","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"dst","type":"address"},{"indexed":false,"internalType":"uint256","name":"wad","type":"uint256"}],"name":"Deposit","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"src","type":"address"},{"indexed":true,"internalType":"address","name":"dst","type":"address"},{"indexed":false,"internalType":"uint256","name":"wad","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"src","type":"address"},{"indexed":false,"internalType":"uint256","name":"wad","type":"uint256"}],"name":"Withdrawal","type":"event"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"guy","type":"address"},{"internalType":"uint256","name":"wad","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"deposit","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"mint","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"dst","type":"address"},{"internalType":"uint256","name":"wad","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"src","type":"address"},{"internalType":"address","name":"dst","type":"address"},{"internalType":"uint256","name":"wad","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"wad","type":"uint256"}],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"},{"stateMutability":"payable","type":"receive"}] as const;
const bytecode = "60c0604052600d60808190526c2bb930b83832b21022ba3432b960991b60a090815262000030916000919062000220565b50604080518082019091526004808252630ae8aa8960e31b60209092019182526200005e9160019162000220565b506002805460ff191660121790553480156200007957600080fd5b50604051620011de380380620011de8339810160408190526200009c9162000393565b600580546001600160a01b031916339081179091556040518190600090600080516020620011be833981519152908290a3508251620000e390600090602086019062000220565b508151620000f990600190602085019062000220565b5062000105816200010e565b5050506200045d565b6005546001600160a01b031633146200016e5760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e657260448201526064015b60405180910390fd5b6001600160a01b038116620001d55760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b606482015260840162000165565b6005546040516001600160a01b03808416921690600080516020620011be83398151915290600090a3600580546001600160a01b0319166001600160a01b0392909216919091179055565b8280546200022e9062000420565b90600052602060002090601f0160209004810192826200025257600085556200029d565b82601f106200026d57805160ff19168380011785556200029d565b828001600101855582156200029d579182015b828111156200029d57825182559160200191906001019062000280565b50620002ab929150620002af565b5090565b5b80821115620002ab5760008155600101620002b0565b634e487b7160e01b600052604160045260246000fd5b600082601f830112620002ee57600080fd5b81516001600160401b03808211156200030b576200030b620002c6565b604051601f8301601f19908116603f01168101908282118183101715620003365762000336620002c6565b816040528381526020925086838588010111156200035357600080fd5b600091505b8382101562000377578582018301518183018401529082019062000358565b83821115620003895760008385830101525b9695505050505050565b600080600060608486031215620003a957600080fd5b83516001600160401b0380821115620003c157600080fd5b620003cf87838801620002dc565b94506020860151915080821115620003e657600080fd5b50620003f586828701620002dc565b604086015190935090506001600160a01b03811681146200041557600080fd5b809150509250925092565b600181811c908216806200043557607f821691505b602082108114156200045757634e487b7160e01b600052602260045260246000fd5b50919050565b610d51806200046d6000396000f3fe6080604052600436106100ec5760003560e01c806370a082311161008a578063a9059cbb11610059578063a9059cbb14610290578063d0e30db0146102b0578063dd62ed3e146102b8578063f2fde38b146102f057600080fd5b806370a0823114610204578063715018a6146102315780638da5cb5b1461024657806395d89b411461027b57600080fd5b806323b872dd116100c657806323b872dd146101785780632e1a7d4d14610198578063313ce567146101b857806340c10f19146101e457600080fd5b806306fdde0314610100578063095ea7b31461012b57806318160ddd1461015b57600080fd5b366100fb576100f9610310565b005b600080fd5b34801561010c57600080fd5b5061011561036b565b6040516101229190610b00565b60405180910390f35b34801561013757600080fd5b5061014b610146366004610b9c565b6103f9565b6040519015158152602001610122565b34801561016757600080fd5b50475b604051908152602001610122565b34801561018457600080fd5b5061014b610193366004610bc6565b610472565b3480156101a457600080fd5b506100f96101b3366004610c02565b610689565b3480156101c457600080fd5b506002546101d29060ff1681565b60405160ff9091168152602001610122565b3480156101f057600080fd5b5061014b6101ff366004610b9c565b61072f565b34801561021057600080fd5b5061016a61021f366004610c1b565b60036020526000908152604090205481565b34801561023d57600080fd5b506100f961083d565b34801561025257600080fd5b5060055460405173ffffffffffffffffffffffffffffffffffffffff9091168152602001610122565b34801561028757600080fd5b5061011561092d565b34801561029c57600080fd5b5061014b6102ab366004610b9c565b61093a565b6100f9610310565b3480156102c457600080fd5b5061016a6102d3366004610c36565b600460209081526000928352604080842090915290825290205481565b3480156102fc57600080fd5b506100f961030b366004610c1b565b61094e565b336000908152600360205260408120805434929061032f908490610c98565b909155505060405134815233907fe1fffcc4923d04b559f4d29a8bfc6cda04eb5b0d3c460751c2402c5c5cc9109c9060200160405180910390a2565b6000805461037890610cb0565b80601f01602080910402602001604051908101604052809291908181526020018280546103a490610cb0565b80156103f15780601f106103c6576101008083540402835291602001916103f1565b820191906000526020600020905b8154815290600101906020018083116103d457829003601f168201915b505050505081565b33600081815260046020908152604080832073ffffffffffffffffffffffffffffffffffffffff8716808552925280832085905551919290917f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925906104619086815260200190565b60405180910390a350600192915050565b73ffffffffffffffffffffffffffffffffffffffff83166000908152600360205260408120548211156104a457600080fd5b73ffffffffffffffffffffffffffffffffffffffff8416331480159061051a575073ffffffffffffffffffffffffffffffffffffffff841660009081526004602090815260408083203384529091529020547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff14155b156105a25773ffffffffffffffffffffffffffffffffffffffff8416600090815260046020908152604080832033845290915290205482111561055c57600080fd5b73ffffffffffffffffffffffffffffffffffffffff841660009081526004602090815260408083203384529091528120805484929061059c908490610d04565b90915550505b73ffffffffffffffffffffffffffffffffffffffff8416600090815260036020526040812080548492906105d7908490610d04565b909155505073ffffffffffffffffffffffffffffffffffffffff831660009081526003602052604081208054849290610611908490610c98565b925050819055508273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef8460405161067791815260200190565b60405180910390a35060019392505050565b336000908152600360205260409020548111156106a557600080fd5b33600090815260036020526040812080548392906106c4908490610d04565b9091555050604051339082156108fc029083906000818181858888f193505050501580156106f6573d6000803e3d6000fd5b5060405181815233907f7fcf532c15f0a6db0bd6d0e038bea71d30d808c7d98cb3bf7268a95bf5081b659060200160405180910390a250565b60055460009073ffffffffffffffffffffffffffffffffffffffff1633146107b8576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e657260448201526064015b60405180910390fd5b73ffffffffffffffffffffffffffffffffffffffff8316600090815260036020526040812080548492906107ed908490610c98565b909155505060405182815273ffffffffffffffffffffffffffffffffffffffff8416906000907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef90602001610461565b60055473ffffffffffffffffffffffffffffffffffffffff1633146108be576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e657260448201526064016107af565b60055460405160009173ffffffffffffffffffffffffffffffffffffffff16907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0908390a3600580547fffffffffffffffffffffffff0000000000000000000000000000000000000000169055565b6001805461037890610cb0565b6000610947338484610472565b9392505050565b60055473ffffffffffffffffffffffffffffffffffffffff1633146109cf576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e657260448201526064016107af565b73ffffffffffffffffffffffffffffffffffffffff8116610a72576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201527f646472657373000000000000000000000000000000000000000000000000000060648201526084016107af565b60055460405173ffffffffffffffffffffffffffffffffffffffff8084169216907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a3600580547fffffffffffffffffffffffff00000000000000000000000000000000000000001673ffffffffffffffffffffffffffffffffffffffff92909216919091179055565b600060208083528351808285015260005b81811015610b2d57858101830151858201604001528201610b11565b81811115610b3f576000604083870101525b50601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe016929092016040019392505050565b803573ffffffffffffffffffffffffffffffffffffffff81168114610b9757600080fd5b919050565b60008060408385031215610baf57600080fd5b610bb883610b73565b946020939093013593505050565b600080600060608486031215610bdb57600080fd5b610be484610b73565b9250610bf260208501610b73565b9150604084013590509250925092565b600060208284031215610c1457600080fd5b5035919050565b600060208284031215610c2d57600080fd5b61094782610b73565b60008060408385031215610c4957600080fd5b610c5283610b73565b9150610c6060208401610b73565b90509250929050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b60008219821115610cab57610cab610c69565b500190565b600181811c90821680610cc457607f821691505b60208210811415610cfe577f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b50919050565b600082821015610d1657610d16610c69565b50039056fea2646970667358221220342e53f7124d3a5d8934d43f60e89df6b3732d8587fbccd0d0d9bd6170d232b064736f6c634300080a00338be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000001f885520b7bd528e46b390040f12e753dce430040000000000000000000000000000000000000000000000000000000000000004574554480000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000045745544800000000000000000000000000000000000000000000000000000000" as const;

// const CONTRACT_ADDRESS="0xD0dF82dE051244f04BfF3A8bB1f62E1cD39eED92" // WETH on Sepolia
const CONTRACT_ADDRESS="0xC558DBdd856501FCd9aaF1E62eae57A9F0629a3c" // WETH on Sepolia
import dotenv from 'dotenv';
import { createPublicClient, createWalletClient, http } from 'viem';
import {privateKeyToAccount} from 'viem/accounts';
import {sepolia} from 'viem/chains';
dotenv.config();

// Initialize Account
const account = privateKeyToAccount(`0x${process.env.PRIVATE_KEY}`);

// Initialize Client
const walletClient = createWalletClient({
    chain: sepolia,
    account: account,
    transport: http(process.env.API_URL),
});

const publicClient = createPublicClient({
    chain: sepolia,
    transport: http(process.env.API_URL),
});

async function main() {
    let mintWethForMe = await walletClient.writeContract({
        address: CONTRACT_ADDRESS,
        abi: abi,
        functionName: "deposit",
        value: BigInt(100000000000000000), // 0.1 WETH
    })
    await publicClient.waitForTransactionReceipt({hash: mintWethForMe})

    let checkBalance = await publicClient.readContract({
        address: CONTRACT_ADDRESS,
        abi: abi,
        functionName: "balanceOf",
        args: [account.address],
    })
    console.log("WETH balance: ", checkBalance.toString());
}

main();